(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{J5GN:function(t,e,n){"use strict";n.r(e),n.d(e,"TemoignageModule",(function(){return T}));var i=n("ofXK"),r=n("YUcS"),o=n("XiUz"),s=n("3Pt+"),a=n("bTqV"),c=n("kmnG"),b=n("qFsG"),l=n("d3UM"),u=n("tyNb"),g=n("mUB+"),h=n("fXoL"),d=n("SzRU"),m=n("860u"),p=n("J9tS"),f=n("jhN1");const v=function(){return{standalone:!0}};let S=(()=>{class t{constructor(t,e,n,i,r,o){this.clientHttpService=t,this.alertService=e,this.route=n,this.router=i,this.sanitizer=r,this.formBuilder=o,this.htmlContent="",this.editorConfig=m.a,this.countryList=d.a.map(t=>t.name),this.chosenCountry=""}ngOnInit(){}onFormSubmit(){this.sanitizer.sanitize(h.I.HTML,this.htmlContent),this.htmlContent&&this.clientHttpService.createTemoignage({dataTemoignage:this.htmlContent}).subscribe(()=>{this.router.navigate(["/temoignage"],{relativeTo:this.route})},t=>{this.alertService.error(t)})}}return t.\u0275fac=function(e){return new(e||t)(h.Lb(p.b),h.Lb(p.a),h.Lb(u.a),h.Lb(u.c),h.Lb(f.b),h.Lb(s.b))},t.\u0275cmp=h.Fb({type:t,selectors:[["app-create-temoignage"]],decls:8,vars:5,consts:[["fxLayout","column","fxLayoutAlign","space-around",3,"ngSubmit"],[2,"text-align","center"],[3,"placeholder","ngModelOptions","ngModel","config","ngModelChange"],[2,"text-align","center","padding-top","1%"],["mat-raised-button","","color","primary"]],template:function(t,e){1&t&&(h.Qb(0,"form",0),h.Yb("ngSubmit",(function(){return e.onFormSubmit()})),h.Qb(1,"h1",1),h.xc(2,"Cr\xe9ation d'article pour un t\xe9moignage"),h.Pb(),h.Qb(3,"div"),h.Qb(4,"angular-editor",2),h.Yb("ngModelChange",(function(t){return e.htmlContent=t})),h.Pb(),h.Pb(),h.Qb(5,"div",3),h.Qb(6,"button",4),h.xc(7," Sauvegarder "),h.Pb(),h.Pb(),h.Pb()),2&t&&(h.zb(4),h.hc("placeholder","Veuillez saisir un t\xe9moignage ")("ngModelOptions",h.jc(4,v))("ngModel",e.htmlContent)("config",e.editorConfig))},directives:[s.n,s.i,s.j,o.b,o.a,g.a,s.h,s.k,a.a],styles:[""]}),t})();var y=n("SxV6");let L=(()=>{class t{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustHtml(t)}}return t.\u0275fac=function(e){return new(e||t)(h.Lb(f.b))},t.\u0275pipe=h.Kb({name:"safeHtml",type:t,pure:!0}),t})();function P(t,e){1&t&&h.Mb(0,"span",13)}function Q(t,e){if(1&t){const t=h.Rb();h.Qb(0,"tr"),h.Qb(1,"td"),h.xc(2),h.Pb(),h.Mb(3,"td",8),h.dc(4,"safeHtml"),h.Qb(5,"td",9),h.Qb(6,"a",10),h.xc(7,"Modifier"),h.Pb(),h.Qb(8,"button",11),h.Yb("click",(function(){h.pc(t);const n=e.$implicit;return h.cc().deleteTemoignage(n._id)})),h.xc(9," Supprimer "),h.wc(10,P,1,0,"span",12),h.Pb(),h.Pb(),h.Pb()}if(2&t){const t=e.$implicit,n=e.index,i=h.cc();h.zb(2),h.yc(n+1),h.zb(1),h.hc("innerHtml",h.ec(4,4,t.data),h.qc),h.zb(3),h.ic("routerLink","edit/",t._id,""),h.zb(4),h.hc("ngIf",!i.isDeleting)}}function C(t,e){1&t&&(h.Qb(0,"tr"),h.Qb(1,"td",14),h.Mb(2,"span",15),h.Pb(),h.Pb())}const x=function(){return["create"]};let M=(()=>{class t{constructor(t,e,n,i){this.clientHttpService=t,this.alertService=e,this.route=n,this.router=i,this.temoignages=[],this.temoignage=null,this.isDeleting=!0}ngOnInit(){this.temoignage$=this.clientHttpService.getAllTemoignage(),this.clientHttpService.getAllTemoignage().subscribe(t=>{this.temoignages=t})}deleteTemoignage(t){this.isDeleting=!0,this.clientHttpService.deleteTemoignage(t).pipe(Object(y.a)()).subscribe(()=>{this.temoignage=this.temoignages.filter(e=>e.id!==t),this.isDeleting=!1,this.ngOnInit(),this.alertService.success("Suppression r\xe9ussi")},t=>{this.alertService.error(t)})}}return t.\u0275fac=function(e){return new(e||t)(h.Lb(p.b),h.Lb(p.a),h.Lb(u.a),h.Lb(u.c))},t.\u0275cmp=h.Fb({type:t,selectors:[["app-display-temoignage"]],decls:14,vars:4,consts:[[1,"table","table-striped"],[2,"width","20%"],[2,"width","60%"],[2,"width","10%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"text-align","center","padding-top","1%"],["mat-raised-button","","color","primary",3,"routerLink"],[3,"innerHtml"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger","btn-delete-user",3,"click"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(t,e){1&t&&(h.Qb(0,"table",0),h.Qb(1,"thead"),h.Qb(2,"tr"),h.Qb(3,"th",1),h.xc(4,"Index"),h.Pb(),h.Qb(5,"th",2),h.xc(6,"Article"),h.Pb(),h.Mb(7,"th",3),h.Pb(),h.Pb(),h.Qb(8,"tbody"),h.wc(9,Q,11,6,"tr",4),h.wc(10,C,3,0,"tr",5),h.Pb(),h.Pb(),h.Qb(11,"div",6),h.Qb(12,"button",7),h.xc(13," Cr\xe9er des t\xe9moignages \xa0 "),h.Pb(),h.Pb()),2&t&&(h.zb(9),h.hc("ngForOf",e.temoignages),h.zb(1),h.hc("ngIf",!e.temoignages),h.zb(2),h.hc("routerLink",h.jc(3,x)))},directives:[i.j,i.k,a.a,u.d,u.f],pipes:[L],styles:[""]}),t})();const w=function(){return{standalone:!0}},z=[{path:"",component:M},{path:"create",component:S},{path:"edit/:id",component:(()=>{class t{constructor(t,e,n,i,r,o){this.clientHttpService=t,this.alertService=e,this.route=n,this.router=i,this.sanitizer=r,this.formBuilder=o,this.htmlContent="",this.editorConfig=m.a,this.countryList=d.a.map(t=>t.name),this.chosenCountry=""}ngOnInit(){this.clientHttpService.getTemoignageById(this.route.snapshot.params.id).subscribe(t=>{this.htmlContent=t.data})}onFormSubmit(){this.htmlContent&&this.clientHttpService.updateTemoignage(this.route.snapshot.params.id,{data:this.htmlContent}).subscribe(()=>{this.router.navigate(["/temoignage"],{relativeTo:this.route}),this.alertService.success("Mise a jour r\xe9ussi")},t=>{this.alertService.error(t)})}}return t.\u0275fac=function(e){return new(e||t)(h.Lb(p.b),h.Lb(p.a),h.Lb(u.a),h.Lb(u.c),h.Lb(f.b),h.Lb(s.b))},t.\u0275cmp=h.Fb({type:t,selectors:[["app-edit-temoignage"]],decls:8,vars:5,consts:[["fxLayout","column","fxLayoutAlign","space-around",3,"ngSubmit"],[2,"text-align","center"],[3,"placeholder","ngModelOptions","ngModel","config","ngModelChange"],[2,"text-align","center","padding-top","1%"],["mat-raised-button","","color","primary"]],template:function(t,e){1&t&&(h.Qb(0,"form",0),h.Yb("ngSubmit",(function(){return e.onFormSubmit()})),h.Qb(1,"h1",1),h.xc(2,"Cr\xe9ation d'article pour un t\xe9moignage"),h.Pb(),h.Qb(3,"div"),h.Qb(4,"angular-editor",2),h.Yb("ngModelChange",(function(t){return e.htmlContent=t})),h.Pb(),h.Pb(),h.Qb(5,"div",3),h.Qb(6,"button",4),h.xc(7," Sauvegarder "),h.Pb(),h.Pb(),h.Pb()),2&t&&(h.zb(4),h.hc("placeholder","Veuillez saisir un t\xe9moignage ")("ngModelOptions",h.jc(4,w))("ngModel",e.htmlContent)("config",e.editorConfig))},directives:[s.n,s.i,s.j,o.b,o.a,g.a,s.h,s.k,a.a],styles:[""]}),t})()},{path:"**",component:M}];let H=(()=>{class t{}return t.\u0275mod=h.Jb({type:t}),t.\u0275inj=h.Ib({factory:function(e){return new(e||t)},imports:[[u.g.forChild(z)],u.g]}),t})(),T=(()=>{class t{}return t.\u0275mod=h.Jb({type:t}),t.\u0275inj=h.Ib({factory:function(e){return new(e||t)},imports:[[i.c,H,u.g,g.b,s.e,s.l,l.b,a.b,c.d,b.b,a.b,r.a,o.c],l.b,a.b,c.d,b.b,a.b]}),t})()}}]);